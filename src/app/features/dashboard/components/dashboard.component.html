<div class="dashboard-container">
  <div class="dashboard-section">
    <div class="dashboard-section-header">
      <div class="dashboard-section-title-wrapper">
        <h3 class="dashboard-section-title">
          <div class="dashboard-title-icon-wrapper">
            <app-calendar-icon
              size="38"
              strokeWidth="2"
              cssClass="dashboard-hero-icon"
            ></app-calendar-icon>
          </div>
          Dashboard & Statistics
        </h3>
        <p class="dashboard-section-subtitle">
          Overview of your birthday collection
        </p>
      </div>
    </div>
  </div>

  <app-dashboard-stats
    [totalBirthdays]="totalBirthdays()"
    [birthdaysThisMonth]="birthdaysThisMonth()"
    [averageAge]="averageAge()"
    [nextBirthdayDays]="nextBirthdayDays()"
    [nextBirthdayText]="nextBirthdayText()"
  ></app-dashboard-stats>

  <app-notification-permission-banner></app-notification-permission-banner>

  <app-category-filter
    [categoriesStats]="categoriesStats()"
    [selectedCategory]="selectedCategory"
    (categorySelected)="selectCategory($event)"
    (filterCleared)="clearCategoryFilter()"
    (addCategoryClicked)="onAddCategory()"
    (editCategoryClicked)="onEditCategory($event)"
    (deleteCategoryClicked)="onDeleteCategory($event)"
  ></app-category-filter>

  <app-birthday-list
    [birthdays]="allBirthdays()"
    [categories]="categories()"
    [searchTerm]="dashboardSearchTerm"
    [lastAction]="lastAction"
    [totalBirthdays]="totalBirthdays()"
    (searchTermChange)="onSearchTermChange($event)"
    (clearSearch)="onClearSearch()"
    (undoAction)="undoLastAction()"
    (addTestData)="addTestData()"
    (clearAllData)="clearAllData()"
  ></app-birthday-list>

  <button
    mat-fab
    color="primary"
    class="schedule-message-fab"
    (click)="openMessageDialog($event)"
    matTooltip="Schedule Birthday Messages"
    matTooltipPosition="left"
    aria-label="Schedule birthday messages"
  >
    <mat-icon>schedule_send</mat-icon>
  </button>

  <div class="full-width-section">
    <app-birthday-chart
      [chartData]="chartData()"
      [maxCount]="maxCount()"
      [currentMonth]="currentMonth"
      [totalBirthdays]="totalBirthdays()"
    ></app-birthday-chart>
  </div>

  <div class="full-width-section">
    <app-google-calendar-sync></app-google-calendar-sync>
  </div>
</div>
